(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/secskillDetail"],{"229e":function(t,e,n){"use strict";n.r(e);var i=n("8925"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=s.a},5028:function(t,e,n){"use strict";n.r(e);var i=n("c84f"),s=n("229e");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("e024");var o,r=n("f0c5"),u=Object(r["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);e["default"]=u.exports},"81fe":function(t,e,n){"use strict";(function(t){n("e160"),n("921b");i(n("66fd"));var e=i(n("5028"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},8925:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),s=o(n("660b")),a=n("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){u(t,e,n[e])})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e,n,i,s,a,o){try{var r=t[a](o),u=r.value}catch(c){return void n(c)}r.done?e(u):Promise.resolve(u).then(i,s)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var a=t.apply(e,n);function o(t){c(a,i,s,o,r,"next",t)}function r(t){c(a,i,s,o,r,"throw",t)}o(void 0)})}}var d=function(){return n.e("components/share").then(n.bind(null,"353a"))},f={components:{share:d},data:function(){return{maskState:0,specClass:"none",specSelected:[],small:null,sku:[],detailData:[],skillDetail:[],goods:[],favorite:!0,shareList:[],consultList:[],couponList:[],basicMarkingList:[],basicGiftsList:[],consultCount:{all:0,bad:0,general:0,goods:0},imgList:[{src:"https://gd3.alicdn.com/imgextra/i3/0/O1CN01IiyFQI1UGShoFKt1O_!!0-item_pic.jpg_400x400.jpg"},{src:"https://gd3.alicdn.com/imgextra/i3/TB1RPFPPFXXXXcNXpXXXXXXXXXX_!!0-item_pic.jpg_400x400.jpg"},{src:"https://gd2.alicdn.com/imgextra/i2/38832490/O1CN01IYq7gu1UGShvbEFnd_!!38832490.jpg_400x400.jpg"}],desc:"\n\n\t\t\t\t",skuList:[],specList:[],specChildList:[]}},onLoad:function(){var e=l(i.default.mark(function e(n){var a,o,r,u,c,l,d,f,p,h,g,m,v,b;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=n.id,!a){e.next=45;break}return this.logining=!0,o={id:n.id},e.next=6,s.default.apiCall("get",s.default.goods.secskillDetail,o);case 6:if(r=e.sent,this.logining=!1,!r){e.next=24;break}return u=r.goods,c=u.goods,this.goods=c,this.favorite=r.favorite,this.skillDetail=r.skillDetail,this.typeGoodsList=u.typeGoodsList,l=c.albumPics,this.desc=c.detailHtml,this.small=l.split(","),e.next=20,this.$api.json("shareList");case 20:d=e.sent,this.loaded=!0,this.shareList=d,t.setNavigationBarTitle({title:c.name});case 24:if(!this.hasLogin){e.next=28;break}return f={goodsId:n.id,memberId:this.userInfo.userInfo.id},e.next=28,s.default.apiCall("post",s.default.goods.addView,f);case 28:return p={goodsId:n.id},e.next=31,s.default.apiCall("get",s.default.goods.consultList,p);case 31:return h=e.sent,this.consultList=h.list,this.consultCount=h.count,g={},e.next=37,s.default.apiCall("get",s.default.index.couponList,g);case 37:return m=e.sent,this.couponList=m,v={id:n.id},e.next=42,s.default.apiCall("get",s.default.goods.goodsPromoto,v);case 42:b=e.sent,this.basicMarkingList=b.basicMarkingList,this.basicGiftsList=b.basicGiftsList;case 45:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),computed:r({},(0,a.mapState)(["hasLogin","userInfo"])),methods:{toggleMask:function(t){var e=this,n="show"===t?10:300,i="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=i},n)},obtainCoupon:function(){var e=l(i.default.mark(function e(n){var a,o;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.hasLogin||this.$api.msg("请先登录"),t.showLoading({title:"请稍后"}),a={couponId:n.id},e.next=5,s.default.apiCall("post",s.default.index.acceptCoupon,a);case 5:o=e.sent,console.log(o),o&&(this.$api.msg(o),this.toggleMask()),t.hideLoading();case 9:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),share:function(){this.$refs.share.toggleMask()},toFavorite:function(e){if(this.hasLogin){this.favorite=!this.favorite;var n={objId:e.id,type:1,memberId:this.userInfo.userInfo.id,name:e.name,meno1:e.pic,meno2:e.price,meno3:e.sale};s.default.apiCall("post",s.default.goods.favoriteSave,n)}else{var i="/pages/public/login";t.navigateTo({url:i})}},buy:function(){var e=l(i.default.mark(function e(n){var s;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasLogin||(s="/pages/public/login",t.navigateTo({url:s})),!(this.goods.stock<1&&this.skillDetail.flashPromotionCount<1)){e.next=4;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 4:t.navigateTo({url:"/pages/order/createOrder?type=6&&skillId=".concat(this.skillDetail.id)});case 5:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),addCart:function(){var e=l(i.default.mark(function e(n){var a,o,r,u;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.hasLogin){e.next=4;break}return a="/pages/public/login",t.navigateTo({url:a}),e.abrupt("return",!1);case 4:if(o=n.id,!(this.goods.stock<1)){e.next=8;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 8:return u={goodsId:o,memberId:this.userInfo.userInfo.id,orderType:5},e.next=11,s.default.apiCall("post",s.default.order.addCart,u);case 11:r=e.sent,r?this.$api.msg("添加购物车成功!"):this.$api.msg("加入购物车错误");case 13:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),stopPrevent:function(){}}};e.default=f}).call(this,n("543d")["default"])},c84f:function(t,e,n){"use strict";var i,s=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},d4d2:function(t,e,n){},e024:function(t,e,n){"use strict";var i=n("d4d2"),s=n.n(i);s.a}},[["81fe","common/runtime","common/vendor"]]]);