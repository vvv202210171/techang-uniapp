(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/groupActivityDetail"],{"13aa":function(t,e,s){"use strict";var n=s("f3ce"),i=s.n(n);i.a},28249:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(s("a34a")),i=a(s("660b")),r=s("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},n=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),n.forEach(function(e){u(t,e,s[e])})}return t}function u(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function c(t,e,s,n,i,r,a){try{var o=t[r](a),u=o.value}catch(c){return void s(c)}o.done?e(u):Promise.resolve(u).then(n,i)}function l(t){return function(){var e=this,s=arguments;return new Promise(function(n,i){var r=t.apply(e,s);function a(t){c(r,n,i,a,o,"next",t)}function o(t){c(r,n,i,a,o,"throw",t)}a(void 0)})}}var d=function(){return s.e("components/share").then(s.bind(null,"353a"))},f={components:{share:d},data:function(){return{maskState:0,specClass:"none",specSelected:[],small:null,sku:[],detailData:[],goods:[],groupActivity:[],favorite:!0,shareList:[],consultList:[],couponList:[],consultCount:{all:0,bad:0,general:0,goods:0},imgList:[{src:"https://gd3.alicdn.com/imgextra/i3/0/O1CN01IiyFQI1UGShoFKt1O_!!0-item_pic.jpg_400x400.jpg"},{src:"https://gd3.alicdn.com/imgextra/i3/TB1RPFPPFXXXXcNXpXXXXXXXXXX_!!0-item_pic.jpg_400x400.jpg"},{src:"https://gd2.alicdn.com/imgextra/i2/38832490/O1CN01IYq7gu1UGShvbEFnd_!!38832490.jpg_400x400.jpg"}],desc:"\n\n\t\t\t\t",skuList:[],specList:[],specChildList:[]}},onLoad:function(){var e=l(n.default.mark(function e(s){var r,a,o,u,c,l,d,f,p,h,g,v,k,m,b=this;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=s.id,!r){e.next=43;break}return this.logining=!0,a={id:s.id},e.next=6,i.default.apiCall("get",i.default.index.groupActivityDetail,a);case 6:if(o=e.sent,this.logining=!1,!o){e.next=27;break}return u=o.goods,c=u.goods,this.goods=c,this.favorite=o.favorite,this.groupActivity=o.groupActivity,this.typeGoodsList=u.typeGoodsList,l=c.albumPics,this.desc=c.detailHtml,this.small=l.split(","),e.next=20,this.$api.json("shareList");case 20:d=e.sent,this.loaded=!0,this.shareList=d,this.specList=u.productAttributeValueList,this.skuList=u.skuStockList,this.specList&&this.specList.forEach(function(t){var e=t.value.split(",");if(e){var s=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var o=r.value,u={};u.pid=t.id,u.name=o,b.specChildList.push(u)}}catch(c){n=!0,i=c}finally{try{s||null==a.return||a.return()}finally{if(n)throw i}}}}),t.setNavigationBarTitle({title:c.name});case 27:if(!userInfo||!userInfo.id){e.next=31;break}return f={goodsId:s.id,memberId:this.userInfo.userInfo.id},e.next=31,i.default.apiCall("post",i.default.goods.addView,f,!0);case 31:return p={goodsId:s.id},e.next=34,i.default.apiCall("get",i.default.goods.consultList,p,!0);case 34:return h=e.sent,this.consultList=h.list,this.consultCount=h.count,g={},e.next=40,i.default.apiCall("get",i.default.index.couponList,g,!0);case 40:v=e.sent,this.couponList=v,console.log(this.couponList);case 43:this.specList&&(k="",this.specList.forEach(function(t){var e=!0,s=!1,n=void 0;try{for(var i,r=b.specChildList[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;if(a.pid===t.id){b.$set(a,"selected",!0),b.specSelected.push(a),k=a.name+","+k;break}}}catch(o){s=!0,n=o}finally{try{e||null==r.return||r.return()}finally{if(s)throw n}}}),m=k.substr(0,k.length-1).split(","),this.skuList.forEach(function(t){1==m.length&&t.sp1==m[0]&&(b.sku=t),2==m.length&&t.sp2==m[0]&&t.sp1==m[1]&&(b.sku=t),3==m.length&&t.sp3==m[0]&&t.sp2==m[1]&&t.sp1==m[2]&&(b.sku=t),b.sku.pic||(b.sku.pic=b.goods.pic),b.sku.stock||(b.sku.stock=0),b.sku.price||(b.sku.price=b.goods.price)}));case 44:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),computed:o({},(0,r.mapState)(["hasLogin","userInfo"])),methods:{toggleMask:function(t){var e=this,s="show"===t?10:300,n="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=n},s)},obtainCoupon:function(){var e=l(n.default.mark(function e(s){var r,a;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.hasLogin||this.$api.msg("请先登录"),t.showLoading({title:"请稍后"}),r={couponId:s.id},e.next=5,i.default.apiCall("post",i.default.index.acceptCoupon,r);case 5:a=e.sent,console.log(a),a&&(this.$api.msg(a),this.toggleMask()),t.hideLoading();case 9:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout(function(){t.specClass="none"},250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(t,e){var s=this,n=this.specChildList;n.forEach(function(t){t.pid===e&&s.$set(t,"selected",!1)}),this.$set(n[t],"selected",!0);var i="";this.specSelected=[],n.forEach(function(t){!0===t.selected&&(s.specSelected.push(t),i=t.name+","+i)});var r=i.substr(0,i.length-1).split(",");this.skuList.forEach(function(t){1==r.length&&t.sp1==r[0]&&(s.sku=t),2==r.length&&t.sp2==r[0]&&t.sp1==r[1]&&(s.sku=t),3==r.length&&t.sp3==r[0]&&t.sp2==r[1]&&t.sp1==r[2]&&(s.sku=t),s.sku.pic||(s.sku.pic=s.goods.pic),s.sku.stock||(s.sku.stock=0),s.sku.price||(s.sku.price=s.goods.price)})},share:function(){this.$refs.share.toggleMask()},toFavorite:function(e){if(userInfo&&userInfo.id){this.favorite=!this.favorite;var s={objId:e.id,type:1,memberId:this.userInfo.userInfo.id,name:e.name,meno1:e.pic,meno2:e.price,meno3:e.sale};i.default.apiCall("post",i.default.goods.favoriteSave,s)}else{var n="/pages/public/login";t.navigateTo({url:n})}},buyGroup:function(){var e=l(n.default.mark(function e(s){var i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:userInfo&&userInfo.id?t.navigateTo({url:"/pages/order/createOrder?groupActivityId="+s.id}):(i="/pages/public/login",t.navigateTo({url:i}));case 1:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),buy:function(){var e=l(n.default.mark(function e(s){var r,a,o,u,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!userInfo||!userInfo.id){e.next=23;break}if(a=s.id,!this.sku||!this.sku.id){e.next=13;break}if(!(this.sku.stock<1)){e.next=6;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 6:return o={goodsId:a,skuId:this.sku.id,memberId:this.userInfo.userInfo.id},e.next=9,i.default.apiCall("post",i.default.order.addCart,o);case 9:r=e.sent,t.navigateTo({url:"/pages/order/createOrder?id=".concat(r.id,"&&type=1&&skuId=").concat(this.sku.id,"&&memberId=").concat(this.userInfo.userInfo.id)}),e.next=21;break;case 13:if(!(this.goods.stock<1)){e.next=16;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 16:return u={goodsId:a,memberId:this.userInfo.userInfo.id},e.next=19,i.default.apiCall("post",i.default.order.addCart,u);case 19:r=e.sent,t.navigateTo({url:"/pages/order/createOrder?id=".concat(r.id,"&&type=1&&memberId=").concat(this.userInfo.userInfo.id)});case 21:e.next=25;break;case 23:c="/pages/public/login",t.navigateTo({url:c});case 25:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),addCart:function(){var e=l(n.default.mark(function e(s){var r,a,o,u,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!userInfo||!userInfo.id){e.next=22;break}if(r=s.id,!this.sku||!this.sku.id){e.next=12;break}if(!(this.sku.stock<1)){e.next=6;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 6:return o={goodsId:r,skuId:this.sku.id,memberId:this.userInfo.userInfo.id},e.next=9,i.default.apiCall("post",i.default.order.addCart,o);case 9:a=e.sent,e.next=19;break;case 12:if(!(this.goods.stock<1)){e.next=15;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 15:return u={goodsId:r,memberId:this.userInfo.userInfo.id},e.next=18,i.default.apiCall("post",i.default.order.addCart,u);case 18:a=e.sent;case 19:a?this.$api.msg("添加购物车成功!"):this.$api.msg("加入购物车错误"),e.next=25;break;case 22:return c="/pages/public/login",t.navigateTo({url:c}),e.abrupt("return",!1);case 25:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),stopPrevent:function(){}}};e.default=f}).call(this,s("543d")["default"])},"6d8a":function(t,e,s){"use strict";(function(t){s("e160"),s("921b");n(s("66fd"));var e=n(s("9cee"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("543d")["createPage"])},"87e8":function(t,e,s){"use strict";var n,i=function(){var t=this,e=t.$createElement;t._self._c},r=[];s.d(e,"b",function(){return i}),s.d(e,"c",function(){return r}),s.d(e,"a",function(){return n})},"9cee":function(t,e,s){"use strict";s.r(e);var n=s("87e8"),i=s("f9a4");for(var r in i)"default"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);s("13aa");var a,o=s("f0c5"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=u.exports},f3ce:function(t,e,s){},f9a4:function(t,e,s){"use strict";s.r(e);var n=s("28249"),i=s.n(n);for(var r in n)"default"!==r&&function(t){s.d(e,t,function(){return n[t]})}(r);e["default"]=i.a}},[["6d8a","common/runtime","common/vendor"]]]);