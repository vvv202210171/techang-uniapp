(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46280284"],{"645f":function(e,t,o){},"6ea4":function(e,t,o){"use strict";o.r(t);var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("任务")]),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.toClose}},[e._v("关闭")])],1),o("el-form",{ref:"editForms",staticClass:"edit-forms",attrs:{model:e.forms,rules:e.rules,"label-position":"left","label-width":e.labelWidth,inline:!0}},[o("el-form-item",{attrs:{label:"商品名称",prop:"goodsName"}},[o("el-input",{staticStyle:{width:"800px"},attrs:{placeholder:"标题"},model:{value:e.forms.goodsName,callback:function(t){e.$set(e.forms,"goodsName",t)},expression:"forms.goodsName"}})],1),o("div"),o("el-form-item",{attrs:{label:"所属类目",prop:"goodsCategoryId"}},[o("el-cascader",{attrs:{options:e.cateTree,size:"small",placeholder:"类目",clearable:""},on:{change:e.handleTypeChange},model:{value:e.selectCateTree,callback:function(t){e.selectCateTree=t},expression:"selectCateTree"}})],1),o("div"),o("el-form-item",{attrs:{label:"关键字"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"商品关键字，采用逗号间隔"},model:{value:e.forms.goodsKeywords,callback:function(t){e.$set(e.forms,"goodsKeywords",t)},expression:"forms.goodsKeywords"}})],1),o("div"),o("el-form-item",{attrs:{label:"商品图标",prop:"goodsPicUrl"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"http-request":e.uploadImage,data:{type:"pic"}}},[e.forms.goodsPicUrl?o("img",{staticClass:"avatar",attrs:{src:e.forms.goodsPicUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),o("div",[o("el-form-item",{attrs:{label:"浏览量",prop:"goodsHit"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsHit,callback:function(t){e.$set(e.forms,"goodsHit",t)},expression:"forms.goodsHit"}})],1),o("el-form-item",{attrs:{label:"库存",prop:"goodsStock"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsStock,callback:function(t){e.$set(e.forms,"goodsStock",t)},expression:"forms.goodsStock"}})],1),o("el-form-item",{attrs:{label:"已售出",prop:"goodsSaleNum"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsSaleNum,callback:function(t){e.$set(e.forms,"goodsSaleNum",t)},expression:"forms.goodsSaleNum"}})],1)],1),o("div",[o("el-form-item",{attrs:{label:"原价",prop:"goodsOriginalPrice"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsOriginalPrice,callback:function(t){e.$set(e.forms,"goodsOriginalPrice",t)},expression:"forms.goodsOriginalPrice"}})],1),o("el-form-item",{attrs:{label:"收购价",prop:"goodsPurchasingPrice"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsPurchasingPrice,callback:function(t){e.$set(e.forms,"goodsPurchasingPrice",t)},expression:"forms.goodsPurchasingPrice"}})],1),o("el-form-item",{attrs:{label:"现价",prop:"goodsPrice"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsPrice,callback:function(t){e.$set(e.forms,"goodsPrice",t)},expression:"forms.goodsPrice"}})],1),o("el-form-item",{attrs:{label:"运费",prop:"goodsTransfee"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsTransfee,callback:function(t){e.$set(e.forms,"goodsTransfee",t)},expression:"forms.goodsTransfee"}})],1)],1),o("div",[o("el-form-item",{attrs:{label:"是否新品首发",prop:"goodsIsNew"}},[o("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"新品首发",size:"small"},model:{value:e.forms.goodsIsOnSale,callback:function(t){e.$set(e.forms,"goodsIsOnSale",t)},expression:"forms.goodsIsOnSale"}},e._l(e.goodsIsNewEnum,(function(e,t,s){return o("el-option",{key:s,attrs:{label:e,value:1*t}})})),1)],1),o("el-form-item",{attrs:{label:"是否人气推荐",prop:"goodsIsHot"}},[o("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"人气推荐",size:"small"},model:{value:e.forms.goodsIsOnSale,callback:function(t){e.$set(e.forms,"goodsIsOnSale",t)},expression:"forms.goodsIsOnSale"}},e._l(e.goodsIsHotEnum,(function(e,t,s){return o("el-option",{key:s,attrs:{label:e,value:1*t}})})),1)],1),o("el-form-item",{attrs:{label:"状态",prop:"goodsIsHot"}},[o("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"状态",size:"small"},model:{value:e.forms.goodsIsOnSale,callback:function(t){e.$set(e.forms,"goodsIsOnSale",t)},expression:"forms.goodsIsOnSale"}},e._l(e.goodsIsOnSaleEnum,(function(e,t,s){return o("el-option",{key:s,attrs:{label:e,value:1*t}})})),1)],1)],1),o("div"),o("el-form-item",{attrs:{label:"单位",prop:"goodsUnit"}},[o("el-input",{staticStyle:{width:"100px"},attrs:{size:"small"},model:{value:e.forms.goodsUnit,callback:function(t){e.$set(e.forms,"goodsUnit",t)},expression:"forms.goodsUnit"}})],1),o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[e._v("详情")])]),o("el-form-item",{attrs:{label:"简介"}},[o("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.goodsDetail.goodsBrief,callback:function(t){e.$set(e.goodsDetail,"goodsBrief",t)},expression:"goodsDetail.goodsBrief"}})],1),o("div"),o("el-form-item",{attrs:{label:"轮播图"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"","http-request":e.uploadImage,data:{type:"luobo"},"list-type":"picture","file-list":e.luobos,"on-remove":e.handleRemove}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),o("quill-editor",{ref:"myQuillEditor",staticStyle:{height:"500px"},attrs:{options:e.editorOption},model:{value:e.goodsDetail.goodsDetail,callback:function(t){e.$set(e.goodsDetail,"goodsDetail",t)},expression:"goodsDetail.goodsDetail"}})],1)],1),o("div",{staticStyle:{display:"flex","justify-content":"center",width:"100%"}},[o("el-button",{on:{click:e.toClose}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("保存")])],1)],1)},r=[],a=(o("4de4"),o("d81d"),o("96cf"),o("1da1")),l=o("b48b"),i=o("cf45"),n=(o("c466"),o("ceb8")),d=o("003d"),c=o("953d"),u=(o("a753"),o("8096"),o("14e1"),{data:function(){return{forms:{id:"",goodsName:"",goodsCategoryId:"",goodsKeywords:"",goodsIsOnSale:0,goodsSortOrder:0,goodsPicUrl:"",goodsShareUrl:"",goodsIsNew:0,goodsIsHot:0,goodsUnit:"件",goodsPurchasingPrice:0,goodsOriginalPrice:0,goodsPrice:0,goodsTransfee:0,goodsSaleNum:0,goodsStock:0,goodsHit:0},goodsDetail:{goodsDetail:"",goodsGallery:[],goodsBrief:""},luobos:[],goodsIsOnSaleEnum:d["g"],goodsIsNewEnum:d["f"],goodsIsHotEnum:d["e"],labelWidth:"200",rules:{goodsName:[l["c"]],goodsCategoryId:[l["c"]],goodsPicUrl:[l["c"]],goodsHit:[l["b"],l["c"]],goodsStock:[l["b"],l["c"]],goodsSaleNum:[l["b"],l["c"]],goodsOriginalPrice:[l["a"],l["c"]],goodsPrice:[l["a"],l["c"]],goodsPurchasingPrice:[l["a"],l["c"]],goodsTransfee:[l["a"],l["c"]],goodsUnit:[l["c"]]},headers:{Authorization:Object(i["b"])()},editorOption:{},cateTree:[],selectCateTree:[]}},components:{quillEditor:c["quillEditor"]},mounted:function(){this.loadCateTree();var e=this.$route.query.id;e&&this.loadGoodsById(e)},methods:{loadGoodsById:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var s,r,a,l;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Object(n["h"])({id:e});case 2:if(s=o.sent,0==s.code){o.next=6;break}return t.$message.error(s.msg),o.abrupt("return");case 6:t.forms=s.data.goods,t.goodsDetail=s.data.detail,r=s.data.detail.goodsGallery,t.luobos=r?JSON.parse(r).map((function(e,t){return{name:t,url:e}})):[],a=t.forms.goodsCategoryId,l=t.getParentId(a),t.selectCateTree=l;case 13:case"end":return o.stop()}}),o)})))()},getParentId:function(e){for(var t=0;t<this.cateTree.length;t++){var o=this.cateTree[t];if(o.value==e)return[e];if(o.children)for(var s=0;s<o.children.length;s++){var r=o.children[s];if(r.value==e)return[o.value,r.value];if(r.children)for(var a=0;a<r.children.length;a++){var l=r.children[a];if(l.value==e)return[o.value,r.value,l.value]}}}},loadCateTree:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["g"])();case 2:o=t.sent,0!=o.code&&e.$message.error(o.msg),e.cateTree=o.data;case 5:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){this.luobos=this.luobos.filter((function(t){return t.uid!=e.uid}))},handleTypeChange:function(e){this.forms.goodsCategoryId=e?e[e.length-1]:""},submit:function(){var e=this,t=this;this.$refs.editForms.validate((function(o){if(!o)return e.$message.error("请按照提示正确填写内容！"),!1;t.save()}))},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.monualValide()){t.next=2;break}return t.abrupt("return",!1);case 2:return e.goodsDetail.goodsGallery=0==e.luobos.length?"":JSON.stringify(e.luobos.map((function(e){return e.url}))),o={goods:e.forms,detail:e.goodsDetail},t.next=6,Object(n["c"])(o);case 6:if(s=t.sent,0==s.code){t.next=10;break}return e.$message.error(s.msg),t.abrupt("return");case 10:e.toClose();case 11:case"end":return t.stop()}}),t)})))()},toClose:function(){this.$router.push({name:"goodslist"})},monualValide:function(){return!!Object(l["e"])(this.forms.goodsPicUrl)||(this.$message.error("商品图片没有上传"),!1)},openDialog:function(){Object(i["e"])(this.forms),this.$set(this.forms,"id",null),this.$refs.editForms.resetFields()},FillerFormField:function(e,t){this.$set(this.forms,"id",e),Object(i["a"])(this.forms,t)},uploadStepImage:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var s,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.upload(e);case 2:s=o.sent,r=e.data.index,t.addList[r].taskStepPicUrl=s;case 5:case"end":return o.stop()}}),o)})))()},uploadImage:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.upload(e);case 2:s=o.sent,"pic"==e.data.type?t.forms.goodsPicUrl=s:t.luobos.push({uid:e.file.uid,url:s});case 4:case"end":return o.stop()}}),o)})))()},removeImage:function(e){e.taskStepPicUrl=""},upload:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var s,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(console.log(e),t.beforeAvatarUpload(e.file)){o.next=3;break}return o.abrupt("return");case 3:return s=new FormData,s.set("file",e.file),o.next=7,Object(n["i"])(s);case 7:if(r=o.sent,0==r.code){o.next=11;break}return t.$message.error(r.msg),o.abrupt("return","");case 11:return o.abrupt("return",r.data);case 12:case"end":return o.stop()}}),o)})))()},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,o=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&o}}}),m=u,g=(o("a988"),o("2877")),f=Object(g["a"])(m,s,r,!1,null,null,null);t["default"]=f.exports},a988:function(e,t,o){"use strict";var s=o("645f"),r=o.n(s);r.a}}]);
//# sourceMappingURL=chunk-46280284.b5d1b12d.js.map