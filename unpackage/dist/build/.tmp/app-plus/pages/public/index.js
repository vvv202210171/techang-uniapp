(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/public/index"],{"0a2e":function(e,t,o){"use strict";var i,n=function(){var e=this,t=e.$createElement;e._self._c},r=[];o.d(t,"b",function(){return n}),o.d(t,"c",function(){return r}),o.d(t,"a",function(){return i})},"13fa":function(e,t,o){"use strict";(function(e){o("e160"),o("921b");i(o("66fd"));var t=i(o("78c1"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},"40eb":function(e,t,o){"use strict";o.r(t);var i=o("b54c"),n=o.n(i);for(var r in i)"default"!==r&&function(e){o.d(t,e,function(){return i[e]})}(r);t["default"]=n.a},"497e":function(e,t,o){"use strict";var i=o("62ee"),n=o.n(i);n.a},"62ee":function(e,t,o){},"78c1":function(e,t,o){"use strict";o.r(t);var i=o("0a2e"),n=o("40eb");for(var r in n)"default"!==r&&function(e){o.d(t,e,function(){return n[e]})}(r);o("497e");var s,c=o("f0c5"),u=Object(c["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=u.exports},b54c:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;o("2f62"),n(o("660b")),n(o("77b3"));var i=o("3618");function n(e){return e&&e.__esModule?e:{default:e}}var r={mixins:[i.goBack,i.jumpBackPage],data:function(){return{maxMobile:11,mobile:"",code:"",user_wx_id:"",verification:!0,timer:60,btnb:"btn btn-square btn-c btn-all",type:"",isWeixinBrowser:this.$common.isWeiXinBrowser()}},onLoad:function(t){t.user_wx_id&&(this.user_wx_id=t.user_wx_id,e.setNavigationBarTitle({title:"绑定手机号"}))},computed:{rightMobile:function(){var e={};return this.mobile?/^1[3456789]{1}\d{9}$/gi.test(this.mobile)?e.status=!0:(e.status=!1,e.msg="手机号格式不正确"):(e.status=!1,e.msg="请输入手机号"),e},sendCodeBtn:function(){var e="btn btn-g";return this.mobile.length===this.maxMobile&&this.rightMobile.status?e+" btn-b":e},regButtonClass:function(){return this.mobile&&this.mobile.length===this.maxMobile&&this.code?this.btnb+" btn-b":this.btnb},logoImage:function(){return"/static/missing-face.png"}},onShow:function(){var t=this,o=t.$db.get("userToken");if(o)return e.switchTab({url:"/pages/member/index/index"}),!0;t.timer=parseInt(t.$db.get("timer")),null!=t.timer&&t.timer>0&&(t.countDown(),t.verification=!1)},methods:{sendCode:function(){var e=this;this.rightMobile.status?(this.$common.loadToShow("发送中..."),setTimeout(function(){e.$common.loadToHide(),e.$api.sms({mobile:e.mobile,code:"login"},function(t){t.status?(e.timer=60,e.verification=!1,e.$common.successToShow(t.msg),e.countDown()):e.$common.errorToShow(t.msg)})},1e3)):this.$common.errorToShow(this.rightMobile.msg)},toReg:function(){this.$common.navigateTo("/pages/login/register/index")},countDown:function(){var t=this,o=setInterval(function(){t.timer--,e.setStorage({key:"timer",data:t.timer,success:function(){}}),t.timer<=0&&(t.verification=!0,clearInterval(o))},1e3)},login:function(){var e=this,t=this;if(t.rightMobile.status)if(t.code){var o={mobile:t.mobile,code:t.code},i=t.$db.get("invitecode");i&&(o.invitecode=i),t.$api.smsLogin(o,function(o){o.status?(e.$db.set("userToken",o.data),t.redirectHandler()):t.$common.errorToShow(o.msg)})}else t.$common.errorToShow("请输入短信验证码!");else t.$common.errorToShow(t.rightMobile.msg)},redirectHandler:function(){var e=this;this.$common.successToShow("登录成功!",function(){e.$db.set("timer",0),e.$db.del("invitecode"),e.handleBack()})},toLogin:function(){e.navigateTo({url:"../../login/login/index"})},showTopTips:function(){var t=this;if(""==t.mobile)return t.$common.errorToShow("请输入手机号码"),!1;if(""==this.code)return t.$common.errorToShow("请输入验证码"),!1;if(0==t.user_wx_id)return t.$common.errorToShow("登录失败，请稍后再试",function(){e.navigateBack({delta:1})}),!1;var o=2;o=4;var i={mobile:t.mobile,code:t.code,platform:o,user_wx_id:t.user_wx_id},n=t.$db.get("invitecode");n&&(i.invitecode=n),t.$api.smsLogin(i,function(e){e.status?(t.$db.set("userToken",e.data),t.redirectHandler()):t.$common.errorToShow(e.msg)})},toBind:function(){var e=this;if(""==this.mobile)return this.$common.errorToShow("请输入手机号码"),!1;if(""==this.code)return this.$common.errorToShow("请输入验证码"),!1;var t={mobile:this.mobile,code:this.code,user_wx_id:this.user_wx_id},o=this.$db.get("invitecode");o&&(t.invitecode=o),this.$api.smsLogin(t,function(t){t.status?(e.$db.set("userToken",t.data),e.redirectHandler()):e.$common.errorToShow(t.msg)})},selectLoginType:function(){this.$common.redirectTo("./index1")}}};t.default=r}).call(this,o("6e42")["default"])}},[["13fa","common/runtime","common/vendor"]]]);