(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/share"],{"1eb6":function(e,t,n){"use strict";var r={"tki-qrcode":()=>Promise.all([n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(n.bind(null,"b3d7"))},i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return r})},"249b":function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("a34a")),o=n("2f62"),s=a(n("660b"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){u(o,r,i,s,a,"next",e)}function a(e){u(o,r,i,s,a,"throw",e)}s(void 0)})}}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){return Promise.all([n.e("common/vendor"),n.e("components/tki-qrcode/tki-qrcode")]).then(n.bind(null,"b3d7"))},p={components:{tkiQrcode:f},data:function(){return{providerList:[],shareUrl:"www.baidu.com",type:0}},onLoad:function(){this.loadQr(),this.loadProvider()},computed:l({},(0,o.mapState)(["hasLogin","userInfo"])),methods:{loadQr:function(){var e=c(i.default.mark(function e(){var t;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.default.apiCall("GET",s.default.member.shareUrl,{});case 2:if(t=e.sent,0==t.code){e.next=6;break}return this.$api.msg(t.msg),e.abrupt("return");case 6:this.shareUrl=t.data;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),loadProvider:function(){var t=this;e.getProvider({service:"share",success:function(e){for(var n=[],r=0;r<e.provider.length;r++)switch(e.provider[r]){case"weixin":n.push({name:"分享到微信好友",id:"weixin"}),n.push({name:"分享到微信朋友圈",id:"weixin",type:"WXSenceTimeline"});break;case"qq":n.push({name:"分享到QQ",id:"qq"});break;default:break}t.providerList=n},fail:function(e){r("log","获取登录通道失败"+JSON.stringify(e)," at pages\\user\\share.vue:93")}})},sharurl:function(){e.setClipboardData({data:this.qrR,success:function(){r("log","success"," at pages\\user\\share.vue:102"),e.showModal({title:"复制成功",content:"内容已复制到粘贴板，可前往其他应用粘贴查看。",showCancel:!1,success:function(e){e.confirm||e.cancel}})}})},save:function(){var t=this;e.showActionSheet({itemList:["保存图片到相册"],success:function(){t.$refs.qrcode._saveCode()}})},share:function(t){var n=this;if(0!==this.providerList.length){var i=this.providerList.map(function(e){return e.name});r("log",i," at pages\\user\\share.vue:139"),e.showActionSheet({itemList:i,success:function(t){r("log",n.providerList[t.tapIndex].id," at pages\\user\\share.vue:144"),"qq"==n.providerList[t.tapIndex].id?n.type=1:n.type=0,e.share({provider:n.providerList[t.tapIndex].id,scene:n.providerList[t.tapIndex].type&&"WXSenceTimeline"===n.providerList[t.tapIndex].type?"WXSenceTimeline":"WXSceneSession",type:n.type,title:"土特产商城",summary:"土特产是一个让你找到原生态的商城",imageUrl:"http://pds.jyt123.com/wxtest/logo.png",href:"https://m3w.cn/uniapp",success:function(e){r("log","success:"+JSON.stringify(e)," at pages\\user\\share.vue:159")},fail:function(t){e.showModal({content:t.errMsg,showCancel:!1})}})}})}else e.showModal({title:"当前环境无分享渠道!",showCancel:!1})},openLink:function(){plus.runtime.openWeb(this.sourceLink)}}};t.default=p}).call(this,n("6e42")["default"],n("0de9")["default"])},"4ec1":function(e,t,n){"use strict";var r=n("bd38"),i=n.n(r);i.a},"5f08":function(e,t,n){"use strict";(function(e){n("e160"),n("921b");r(n("66fd"));var t=r(n("8f26"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"8f26":function(e,t,n){"use strict";n.r(t);var r=n("1eb6"),i=n("d409");for(var o in i)"default"!==o&&function(e){n.d(t,e,function(){return i[e]})}(o);n("4ec1");var s,a=n("f0c5"),u=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],s);t["default"]=u.exports},bd38:function(e,t,n){},d409:function(e,t,n){"use strict";n.r(t);var r=n("249b"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,function(){return r[e]})}(o);t["default"]=i.a}},[["5f08","common/runtime","common/vendor"]]]);