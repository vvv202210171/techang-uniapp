(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/groupActivityDetail"],{"13aa":function(t,e,s){"use strict";var i=s("f3ce"),n=s.n(i);n.a},28249:function(t,e,s){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(s("a34a")),r=o(s("660b")),a=s("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function u(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),i.forEach(function(e){c(t,e,s[e])})}return t}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function l(t,e,s,i,n,r,a){try{var o=t[r](a),u=o.value}catch(c){return void s(c)}o.done?e(u):Promise.resolve(u).then(i,n)}function d(t){return function(){var e=this,s=arguments;return new Promise(function(i,n){var r=t.apply(e,s);function a(t){l(r,i,n,a,o,"next",t)}function o(t){l(r,i,n,a,o,"throw",t)}a(void 0)})}}var f=function(){return s.e("components/share").then(s.bind(null,"353a"))},p={components:{share:f},data:function(){return{maskState:0,specClass:"none",specSelected:[],small:null,sku:[],detailData:[],goods:[],groupActivity:[],favorite:!0,shareList:[],consultList:[],couponList:[],consultCount:{all:0,bad:0,general:0,goods:0},imgList:[{src:"https://gd3.alicdn.com/imgextra/i3/0/O1CN01IiyFQI1UGShoFKt1O_!!0-item_pic.jpg_400x400.jpg"},{src:"https://gd3.alicdn.com/imgextra/i3/TB1RPFPPFXXXXcNXpXXXXXXXXXX_!!0-item_pic.jpg_400x400.jpg"},{src:"https://gd2.alicdn.com/imgextra/i2/38832490/O1CN01IYq7gu1UGShvbEFnd_!!38832490.jpg_400x400.jpg"}],desc:"\n\n\t\t\t\t",skuList:[],specList:[],specChildList:[]}},onLoad:function(){var e=d(n.default.mark(function e(s){var a,o,u,c,l,d,f,p,h,g,v,k,m,b,I=this;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=s.id,!a){e.next=43;break}return this.logining=!0,o={id:s.id},e.next=6,r.default.apiCall("get",r.default.index.groupActivityDetail,o);case 6:if(u=e.sent,this.logining=!1,!u){e.next=27;break}return c=u.goods,l=c.goods,this.goods=l,this.favorite=u.favorite,this.groupActivity=u.groupActivity,this.typeGoodsList=c.typeGoodsList,d=l.albumPics,this.desc=l.detailHtml,this.small=d.split(","),e.next=20,this.$api.json("shareList");case 20:f=e.sent,this.loaded=!0,this.shareList=f,this.specList=c.productAttributeValueList,this.skuList=c.skuStockList,this.specList&&this.specList.forEach(function(t){var e=t.value.split(",");if(e){var s=!0,i=!1,n=void 0;try{for(var r,a=e[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var o=r.value,u={};u.pid=t.id,u.name=o,I.specChildList.push(u)}}catch(c){i=!0,n=c}finally{try{s||null==a.return||a.return()}finally{if(i)throw n}}}}),t.setNavigationBarTitle({title:l.name});case 27:if(!userInfo||!userInfo.id){e.next=31;break}return p={goodsId:s.id,memberId:this.userInfo.userInfo.id},e.next=31,r.default.apiCall("post",r.default.goods.addView,p,!0);case 31:return h={goodsId:s.id},e.next=34,r.default.apiCall("get",r.default.goods.consultList,h,!0);case 34:return g=e.sent,this.consultList=g.list,this.consultCount=g.count,v={},e.next=40,r.default.apiCall("get",r.default.index.couponList,v,!0);case 40:k=e.sent,this.couponList=k,i("log",this.couponList," at pages\\product\\groupActivityDetail.vue:297");case 43:this.specList&&(m="",this.specList.forEach(function(t){var e=!0,s=!1,i=void 0;try{for(var n,r=I.specChildList[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var a=n.value;if(a.pid===t.id){I.$set(a,"selected",!0),I.specSelected.push(a),m=a.name+","+m;break}}}catch(o){s=!0,i=o}finally{try{e||null==r.return||r.return()}finally{if(s)throw i}}}),b=m.substr(0,m.length-1).split(","),this.skuList.forEach(function(t){1==b.length&&t.sp1==b[0]&&(I.sku=t),2==b.length&&t.sp2==b[0]&&t.sp1==b[1]&&(I.sku=t),3==b.length&&t.sp3==b[0]&&t.sp2==b[1]&&t.sp1==b[2]&&(I.sku=t),I.sku.pic||(I.sku.pic=I.goods.pic),I.sku.stock||(I.sku.stock=0),I.sku.price||(I.sku.price=I.goods.price)}));case 44:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),computed:u({},(0,a.mapState)(["hasLogin","userInfo"])),methods:{toggleMask:function(t){var e=this,s="show"===t?10:300,i="show"===t?1:0;this.maskState=2,setTimeout(function(){e.maskState=i},s)},obtainCoupon:function(){var e=d(n.default.mark(function e(s){var a,o;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.hasLogin||this.$api.msg("请先登录"),t.showLoading({title:"请稍后"}),a={couponId:s.id},e.next=5,r.default.apiCall("post",r.default.index.acceptCoupon,a);case 5:o=e.sent,i("log",o," at pages\\product\\groupActivityDetail.vue:361"),o&&(this.$api.msg(o),this.toggleMask()),t.hideLoading();case 9:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),toggleSpec:function(){var t=this;"show"===this.specClass?(this.specClass="hide",setTimeout(function(){t.specClass="none"},250)):"none"===this.specClass&&(this.specClass="show")},selectSpec:function(t,e){var s=this,i=this.specChildList;i.forEach(function(t){t.pid===e&&s.$set(t,"selected",!1)}),this.$set(i[t],"selected",!0);var n="";this.specSelected=[],i.forEach(function(t){!0===t.selected&&(s.specSelected.push(t),n=t.name+","+n)});var r=n.substr(0,n.length-1).split(",");this.skuList.forEach(function(t){1==r.length&&t.sp1==r[0]&&(s.sku=t),2==r.length&&t.sp2==r[0]&&t.sp1==r[1]&&(s.sku=t),3==r.length&&t.sp3==r[0]&&t.sp2==r[1]&&t.sp1==r[2]&&(s.sku=t),s.sku.pic||(s.sku.pic=s.goods.pic),s.sku.stock||(s.sku.stock=0),s.sku.price||(s.sku.price=s.goods.price)})},share:function(){this.$refs.share.toggleMask()},toFavorite:function(e){if(userInfo&&userInfo.id){this.favorite=!this.favorite;var s={objId:e.id,type:1,memberId:this.userInfo.userInfo.id,name:e.name,meno1:e.pic,meno2:e.price,meno3:e.sale};r.default.apiCall("post",r.default.goods.favoriteSave,s)}else{var i="/pages/public/login";t.navigateTo({url:i})}},buyGroup:function(){var e=d(n.default.mark(function e(s){var i;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:userInfo&&userInfo.id?t.navigateTo({url:"/pages/order/createOrder?groupActivityId="+s.id}):(i="/pages/public/login",t.navigateTo({url:i}));case 1:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),buy:function(){var e=d(n.default.mark(function e(s){var i,a,o,u,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!userInfo||!userInfo.id){e.next=23;break}if(a=s.id,!this.sku||!this.sku.id){e.next=13;break}if(!(this.sku.stock<1)){e.next=6;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 6:return o={goodsId:a,skuId:this.sku.id,memberId:this.userInfo.userInfo.id},e.next=9,r.default.apiCall("post",r.default.order.addCart,o);case 9:i=e.sent,t.navigateTo({url:"/pages/order/createOrder?id=".concat(i.id,"&&type=1&&skuId=").concat(this.sku.id,"&&memberId=").concat(this.userInfo.userInfo.id)}),e.next=21;break;case 13:if(!(this.goods.stock<1)){e.next=16;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 16:return u={goodsId:a,memberId:this.userInfo.userInfo.id},e.next=19,r.default.apiCall("post",r.default.order.addCart,u);case 19:i=e.sent,t.navigateTo({url:"/pages/order/createOrder?id=".concat(i.id,"&&type=1&&memberId=").concat(this.userInfo.userInfo.id)});case 21:e.next=25;break;case 23:c="/pages/public/login",t.navigateTo({url:c});case 25:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),addCart:function(){var e=d(n.default.mark(function e(s){var i,a,o,u,c;return n.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!userInfo||!userInfo.id){e.next=22;break}if(i=s.id,!this.sku||!this.sku.id){e.next=12;break}if(!(this.sku.stock<1)){e.next=6;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 6:return o={goodsId:i,skuId:this.sku.id,memberId:this.userInfo.userInfo.id},e.next=9,r.default.apiCall("post",r.default.order.addCart,o);case 9:a=e.sent,e.next=19;break;case 12:if(!(this.goods.stock<1)){e.next=15;break}return t.showToast({title:"库存不够！"}),e.abrupt("return");case 15:return u={goodsId:i,memberId:this.userInfo.userInfo.id},e.next=18,r.default.apiCall("post",r.default.order.addCart,u);case 18:a=e.sent;case 19:a?this.$api.msg("添加购物车成功!"):this.$api.msg("加入购物车错误"),e.next=25;break;case 22:return c="/pages/public/login",t.navigateTo({url:c}),e.abrupt("return",!1);case 25:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}(),stopPrevent:function(){}}};e.default=p}).call(this,s("6e42")["default"],s("0de9")["default"])},"6d8a":function(t,e,s){"use strict";(function(t){s("e160"),s("921b");i(s("66fd"));var e=i(s("9cee"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,s("6e42")["createPage"])},"87e8":function(t,e,s){"use strict";var i,n=function(){var t=this,e=t.$createElement;t._self._c},r=[];s.d(e,"b",function(){return n}),s.d(e,"c",function(){return r}),s.d(e,"a",function(){return i})},"9cee":function(t,e,s){"use strict";s.r(e);var i=s("87e8"),n=s("f9a4");for(var r in n)"default"!==r&&function(t){s.d(e,t,function(){return n[t]})}(r);s("13aa");var a,o=s("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);e["default"]=u.exports},f3ce:function(t,e,s){},f9a4:function(t,e,s){"use strict";s.r(e);var i=s("28249"),n=s.n(i);for(var r in i)"default"!==r&&function(t){s.d(e,t,function(){return i[t]})}(r);e["default"]=n.a}},[["6d8a","common/runtime","common/vendor"]]]);